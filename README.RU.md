# Автоматизированный медиасервер

## Содержание
- [Автоматизированный медиасервер](#автоматизированный-медиасервер)
  - [Путь пользователя](#путь-пользователя)
  - [Архитектура](#архитектура)
  - [Развертывание](#развертывание)
  - [Конфигурации](#конфигурации)
    - [Plex](#plex)
    - [Heimdall](#heimdall)
    - [qBittorrent](#qbittorrent)
    - [Prowlarr](#prowlarr)
    - [Jackett](#jackett)
    - [Radarr](#radarr)
    - [Sonarr](#sonarr)
    - [Lidarr](#lidarr)
    - [Bazarr](#bazarr)
    - [Ombi](#ombi)
  - [Примечания автора](#примечания-автора)
  - [Ссылки](#ссылки)

Существует множество вариантов для создания медиасервера.<br>
Одним из популярных вариантов является Plex, который представляет собой бесплатное и открытое программное обеспечение для медиасервера, позволяющее организовывать и стримить вашу личную медиаколлекцию.<br>
Другой вариант - Kodi, также бесплатное и открытое программное обеспечение для медиацентра.<br>
Это всего лишь несколько примеров, и конкретное решение, которое лучше всего подойдет вам, будет зависеть от ваших потребностей и технической подготовки.

## Путь пользователя

1. Пользователь обнаруживает новый фильм, телешоу или музыкальный альбом, который хочет посмотреть/послушать.
2. Пользователь открывает веб-интерфейс Ombi и запрашивает добавление фильма, телешоу или музыкального альбома в библиотеку.
3. Ombi отправляет запрос в соответствующий сервис (Radarr, Sonarr или Lidarr) в зависимости от типа запрашиваемого медиа.
4. Сервис (Radarr, Sonarr или Lidarr) автоматически ищет фильм, музыку или серию в интернете с помощью настроенных индексов и трекеров торрентов (через Jackett/Prowlarr).<br>
   После нахождения запрашиваемого медиа, Radarr, Sonarr или Lidarr отправляют команду qBittorrent для скачивания файла.
5. qBittorrent скачивает медиафайл из интернета и помещает его в папку 'Media'.<br>
   После завершения скачивания файл перемещается в соответствующую папку, где его обнаруживает Plex и добавляет в библиотеку.
6. Bazarr подключается к менеджерам контента и периодически проверяет, добавлен ли новый контент.<br>
   Автоматически скачивает субтитры для медиафайла и помещает их в ту же папку, что и медиафайл.
7. Медиафайл и его субтитры теперь доступны в библиотеке Plex и могут быть стримлены пользователем.<br>
   Пользователь может смотреть фильм, слушать музыку или серию и наслаждаться субтитрами.
8. Пользователь может получить доступ к медиафайлу через приложение Plex на своем устройстве и начать наслаждаться контентом.

Пользователь может повторить этот процесс для добавления новых фильмов, музыки или серий в свой список (можно запросить через Plex, Ombi, синхронизировать список IMDB и т. д.) и наслаждаться ими на своем медиасервере.

Как видно, сервис Ombi действует как основной интерфейс для пользователей, чтобы запросить добавление нового медиа в библиотеку.<br>
Radarr, Sonarr и Lidarr с помощью Jackett/Prowlarr работают вместе для автоматизации процесса поиска и скачивания новых медиафайлов, в то время как qBittorrent занимается фактическим скачиванием файлов. И наконец, сервис Bazarr позаботится о скачивании субтитров.

## Архитектура

Архитектурная точка зрения

| Рис. 01 - архитектура |
|:---:|
| ![архитектура](architecture.png "архитектура") |

Plex - отличный выбор для медиасервера и имеет много дополнительных функций, которые могут улучшить ваш опыт стриминга медиа.
В сочетании с другими сервисами, такими как [Radarr](https://radarr.video/), [Sonarr](https://sonarr.tv/), [Lidarr](https://lidarr.audio/), [qBittorrent](https://hub.docker.com/r/linuxserver/qbittorrent), [Jackett](https://github.com/Jackett/Jackett) и [Ombi](https://ombi.io/), он поднимает пользовательский опыт на совершенно новый уровень.

Вот краткое объяснение каждой из услуг и их взаимосвязей:

- **Plex Media Server**<br>
  Это основа медиасервера.
  - Plex - это медиацентр, который позволяет вам организовывать и стримить ваши медиафайлы, такие как фильмы, телешоу, музыка и фотографии, на различные устройства.
  - Это основная служба, которую вы будете использовать для просмотра ваших медиафайлов.
- **Sonarr**<br>
  Это менеджер телешоу.
  - Sonarr - это сервис управления телешоу, который может автоматически скачивать новые телешоу и управлять вашей библиотекой телешоу. Он может быть интегрирован с Jackett, чтобы использовать многие трекеры торрентов, не доступные в стандартной установке, и интегрирован с Filebot для скачивания субтитров для ваших медиафайлов.
  - Позволяет искать, скачивать и организовывать ваши телешоу.
  - Автоматизирует процесс скачивания новых телешоу и управления вашей библиотекой телешоу.
- **Radarr**<br>
  Это менеджер фильмов.
  - Radarr - это сервис управления фильмами, аналогичный Sonarr, но для фильмов. Он может автоматически скачивать новые фильмы и управлять вашей библиотекой фильмов. Он интегрирован с Jackett, чтобы использовать многие трекеры торрентов, не доступные в стандартной установке, и интегрирован с Filebot для скачивания субтитров для ваших медиафайлов.
  - Позволяет искать, скачивать и организовывать ваши фильмы.
  - Автоматизирует процесс скачивания новых фильмов и управления вашей библиотекой фильмов.

  Radarr можно настроить для скачивания фильмов из различных источников.<br>
  Эти источники называются индексами, и это веб-сайты, которые индексируют торренты.
  Radarr можно настроить для подключения к нескольким индексам, и он использует их для поиска торрент-файлов фильмов в списке ожидания пользователя.

  Когда Radarr находит фильм, который есть в списке ожидания пользователя, он скачивает торрент-файл и передает его клиенту для скачивания.
  Это программное обеспечение, которое отвечает за скачивание фактического фильма от пиров в сети торрентов.

  Пользователь может настроить Radarr на использование одного или нескольких индексов и одного клиента для скачивания.
  Они также могут настроить разные приоритеты для индексов, чтобы Radarr сначала пытался скачать фильм из индекса с наивысшим приоритетом, а затем переходил к следующему, если не находит фильм.
- **Lidarr**<br>
  Менеджер музыкальной коллекции.
  - Lidarr - это сервис управления музыкой, аналогичный Sonarr, но для музыки. Он может автоматически скачивать новые музыкальные релизы и управлять вашей музыкальной библиотекой. Он интегрирован с Jackett и qBittorrent, чтобы использовать многие трекеры торрентов и клиент для скачивания, которые недоступны в стандартной установке.
  - Автоматизирует процесс скачивания новой музыки и управления вашей музыкальной библиотекой.
- **Jackett/Prowlarr**<br>
  Это прокси-сервер для индексов.
  - Jackett - это необходимый инструмент, который позволяет использовать множество трекеров торрентов с Sonarr, Radarr и Lidarr, которые недоступны в стандартной установке.
  - Он позволяет использовать гораздо больше индексов, которые не совместимы напрямую с такими приложениями, как Radarr.<br>

  Пожалуйста, имейте в виду, что использование частных трекеров на ваш страх и риск, это противоречит условиям использования многих из этих сайтов, также это незаконно в некоторых странах. Вам следует проверить законы и правила вашей страны перед использованием таких трекеров.
- **qBittorrent**<br> 
  Клиент для скачивания.
  - Автоматизирует процесс скачивания файлов из интернета.
  - Позволяет скачивать фильмы из индексов.
  - Интегрирован с Radarr, Sonarr и т. д., которые будут говорить qBittorrent скачать файлы, которые нашли эти сервисы.
- **Ombi**<br> 
  Приложение для запроса контента.
  - Ombi - это веб-интерфейс, который позволяет пользователям запрашивать добавление новых фильмов, телешоу и музыки в библиотеку.
  - Пользователи могут использовать Ombi для запроса нового контента, и запросы передаются Radarr, Sonarr или Lidarr, которые будут искать запрашиваемые файлы и скачивать их.
- **Bazarr**<br>
  Сопутствующее приложение для Sonarr и Radarr
  - Управляет и скачивает субтитры в соответствии с вашими требованиями.
- **Heimdall**<br>
  Панель управления/домашняя страница для всех приложений.<br>
  Heimdall - это необязательный сервис, вы можете удалить его из стека, но я предпочитаю иметь некоторую точку входа/панель управления/домашнюю страницу для всех приложений. Процесс запроса и скачивания контента полностью автоматизирован, но всегда полезно иметь возможность видеть все приложения и не помнить все IP-адреса и порты, если только у вас нет работающего DNS-сервера (но это уже другая тема).
  - Улучшает поддерживаемость всех сервисов, не нужно помнить, какое приложение работает на каком порту и т. д.
  - Хорошо иметь одну точку доступа ко всем приложениям.

Сервисы Radarr, Sonarr и Lidarr работают вместе для автоматизации процесса скачивания новых фильмов, телешоу и музыкальных релизов и управления вашей библиотекой фильмов, телешоу и музыки.<br>
Эти сервисы используют возможности Jackett/Prowlarr, чтобы использовать множество трекеров торрентов, которые недоступны в стандартной установке, и все они связаны с qBittorrent для автоматического скачивания файлов, когда запрашиваемое медиа доступно.

Radarr и Sonarr являются программами управления медиа для фильмов и телешоу соответственно.
Они во многом схожи, но есть несколько ключевых различий:
- Контент: Radarr используется для управления и скачивания фильмов, в то время как Sonarr используется для управления и скачивания телешоу.
- Индексы: Radarr и Sonarr имеют разные списки совместимых индексов, поэтому, если вы хотите использовать конкретный индекс для фильмов или телешоу, вам придется проверить совместимость индекса с обоими приложениями.
- Пользовательский интерфейс: Оба приложения имеют схожие пользовательские интерфейсы, но они немного различаются по макету и функциональности.
- Дополнительные функции: Radarr имеет функции, которых нет в Sonarr, и наоборот. Например, Radarr поддерживает концепцию "профилей", что позволяет устанавливать разные стандарты качества для фильмов, а Sonarr поддерживает "Season Pass", который автоматически скачивает новые эпизоды ваших любимых телешоу.

В итоге, Radarr и Sonarr - это мощные программы для управления медиа, и их можно использовать вместе для создания комплексного медиасервера, но они специализируются на разных типах контента и имеют уникальные функции.

Jackett/Prowlarr - это API-сервис, который позволяет искать контент на различных торрентовых сайтах.<br>
Эти сервисы (Radarr, Sonarr и Lidarr) могут использовать Jackett для поиска контента на сайтах торрентов.<br>
После того как они находят контент, он скачивается через qBittorrent или другие торрент-клиенты (такие как Transmission).<br>
Jackett/Prowlarr - это инструмент, который позволяет приложениям взаимодействовать с несколькими индексами одновременно и является связующим звеном между вашими приложениями и индексами.<br>
Он действует как прокси между вашими приложениями и индексами, так что вам не нужно настраивать каждое приложение индивидуально.<br>

Что такое индексы в терминах Radarr, Sonarr, Lidarr и Jackett/Prowlarr?<br>
Индексы - это серверы, которые предоставляют информацию о доступных медиафайлах, таких как фильмы и телешоу, для приложений, таких как Radarr, Sonarr и Jackett. Эти приложения используют информацию, предоставленную индексами, для поиска и скачивания медиафайлов из интернета.<br>
В контексте Radarr, Sonarr и Jackett/Prowlarr, индекс - это веб-сайт или сервис, который предоставляет базу данных медиафайлов.<br>
Эти индексы обычно имеют большую коллекцию фильмов и телешоу, которые можно искать и фильтровать для нахождения конкретного контента.<br>
Radarr и Sonarr - это два приложения, которые используют информацию, предоставленную индексами, для автоматического скачивания фильмов и телешоу соответственно.<br>
Они оба могут использовать Jackett/Prowlarr в качестве прокси для взаимодействия с несколькими индексами одновременно.<br>
В общем, индексы предоставляют данные и медиафайлы, Jackett/Prowlarr позволяет этим приложениям взаимодействовать с несколькими индексами, а Radarr и Sonarr - это приложения, которые используют эту информацию для автоматического скачивания медиафайлов.

Bazarr интегрирован с Radarr, Sonarr и Lidarr, которые сообщат Bazarr о необходимости скачать субтитры для файлов, которые нашли эти сервисы.<br>
Bazarr автоматически скачает субтитры для фильма, музыки или сериала и поместит их в ту же папку, что и медиафайл, основываясь на предпочтительных языковых профилях и т. д.

## Развертывание

Настройка медиасервера может быть довольно сложной, но с правильными инструментами и планированием она может предоставить мощный и удобный способ наслаждаться медиа.<br>
Использование Docker Compose для настройки медиасервера - отличный способ упростить процесс и упростить управление сервером. Docker Compose - это инструмент, который позволяет определять и запускать несколько контейнеров как одну службу.<br>
Основная цель файла compose - иметь централизованное место, где вы можете управлять всеми службами для медиацентра.

``docker-compose.yml``
```yaml
version: '3.9'

services:

  plex:
    image: plexinc/pms-docker
    container_name: plex
    environment:
      - PUID=1000
      - PGID=1000
      - VERSION=docker
      - HOSTNAME=”PlexServer”
    volumes:
      - ./provision/plex:/config
      - ./content/media:/data/media
    network_mode: host
    # ports: # when network: bridge
    #   - "32400:32400/tcp"
    #   - "8324:8324/tcp" # Required if network: bridge
    #   - "32469:32469/tcp" # Required if network: bridge
    #   - "1900:1900/udp" # Required if network: bridge
    #   - "32410:32410/udp" # Required if network: bridge
    #   - "32412:32412/udp" # Required if network: bridge
    #   - "32413:32413/udp" # Required if network: bridge
    #   - "32414:32414/udp" # Required if network: bridge
    privileged: true # libusb_init failed
    restart: unless-stopped
    # networks:
    #   - media-network

  radarr:
    image: linuxserver/radarr
    container_name: radarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Sofia
    volumes:
      - ./provision/radarr:/config
      - ./content:/data
    ports:
      - "7878:7878"
    restart: unless-stopped
    networks:
      - media-network

  sonarr:
    image: linuxserver/sonarr
    container_name: sonarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Sofia
    volumes:
      - ./provision/sonarr:/config
      - ./content:/data
    ports:
      - "8989:8989"
    restart: unless-stopped
    networks:
      - media-network

  lidarr:
    image: linuxserver/lidarr
    container_name: lidarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Sofia
    volumes:
      - ./provision/lidarr:/config
      - ./content:/data
    ports:
      - "8686:8686"
    restart: unless-stopped
    networks:
      - media-network

  prowlarr:
    image: linuxserver/prowlarr
    container_name: prowlarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Sofia
    volumes:
      - ./provision/prowlarr:/config
    ports:
      - 9696:9696
    restart: unless-stopped
    networks:
      - media-network

  bazarr:
    image: linuxserver/bazarr
    container_name: bazarr
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Sofia
    volumes:
      - ./provision/bazarr:/config
      - ./content:/data
    ports:
      - "6767:6767"
    restart: unless-stopped
    networks:
      - media-network

  qbittorrent:
    image: linuxserver/qbittorrent
    container_name: qbittorrent
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Sofia
    volumes:
      - ./provision/qbittorrent:/config
      - ./content/torrents:/data/torrents
    ports:
      - "8080:8080"
    restart: unless-stopped
    networks:
      - media-network

  jackett:
    image: linuxserver/jackett
    container_name: jackett
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Sofia
    volumes:
      - ./provision/jackett:/config
    ports:
      - "9117:9117"
    restart: unless-stopped
    networks:
      - media-network

  ombi:
    image: linuxserver/ombi
    container_name: ombi
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Sofia
    volumes:
      - ./provision/ombi:/config
    ports:
      - "3579:3579"
    restart: unless-stopped
    networks:
      - media-network

  heimdall:
    image: linuxserver/heimdall
    container_name: heimdall
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Sofia
    volumes:
      - ./provision/heimdall:/config
    ports:
      - "80:80"
      - "443:443"
      # - "8083:80"
    restart: unless-stopped
    networks:
      - media-network

networks:
  media-network:
```
## Обзор файла Docker Compose

### Volumes
Как вы могли заметить, все службы имеют папку с именем `provision`.
Использование отдельной папки для хранения файлов конфигурации ваших служб - хорошая идея. Это позволит вам легко вносить изменения в файлы конфигурации и также поможет сохранить ваши конфигурации в безопасности.

### Networking `media-network`
Это сеть, к которой подключены службы; она позволяет службам взаимодействовать друг с другом.

### Шаги по созданию медиасервера:

1. **Создание файла Docker Compose**:
   Создайте новый файл с именем `docker-compose.yml` и скопируйте пример файла compose, который я предоставил вам, в этот файл.

2. **Структура папок**:
   Создайте папки `content` и `provision` в той же директории, что и файл compose. Эти папки будут использоваться для хранения ваших медиафайлов и сохранения конфигураций служб.
   Пример структуры папок (в соответствии с вышеупомянутым compose-файлом):
    ```bash
    .
    │   docker-compose.yml
    │   README.md
    │
    ├───content
    │   ├───media
    │   │   ├───movies
    │   │   ├───movies favorite
    │   │   ├───music
    │   │   └───tv
    │   │
    │   ├───torrents
    │   │   ├───movies
    │   │   └───tv
    │   └───usenet
    │       ├───movies
    │       ├───music
    │       └───tv
    │
    └───provision
    ```

3. **Запуск служб**:
   Выполните команду `docker-compose up -d` в той же директории, что и файл compose, чтобы запустить службы, определенные в файле compose.

В целом, файл compose создает мощный и универсальный медиасервер, который может автоматизировать процесс загрузки и управления вашими медиафайлами, а также предоставляет различные функции и инструменты для повышения функциональности и безопасности сервера.

## Конфигурации

Настройка служб.

Имейте в виду, что настройка медиасервера может быть сложной задачей, особенно если вы новичок в этой технологии и вам требуется определенный уровень технических знаний. Возможно, вам потребуется проконсультироваться с дополнительными ресурсами и учебными пособиями для правильной настройки и конфигурации вашего медиасервера.<br>
Также важно помнить, что загрузка контента с авторскими правами через торренты является незаконной в большинстве стран и может привести к правовым последствиям.<br>
Помните, что порядок конфигурации может варьироваться в зависимости от ваших личных предпочтений и конкретных потребностей вашего медиасервера.<br>
Не забывайте, что настройка медиасервера может быть сложной задачей и потребовать нескольких итераций, поэтому потратьте время на тестирование служб и убедитесь, что все работает так, как ожидалось.

### Plex

Так как Plex является основной службой, которая будет использоваться для просмотра ваших медиафайлов, сначала стоит настроить его. Это включает в себя создание вашей учетной записи Plex, настройку медиатеки и конфигурацию дополнительных настроек, которые вам могут понадобиться.

- После запуска контейнера Plex вы можете получить доступ к веб-интерфейсу Plex, перейдя по адресу `http://<your_host_ip>:32400/web` в вашем браузере.
- Вам будет предложено войти в систему или создать новую учетную запись.
- После входа в систему вам будет предложено добавить ваши медиапапки.
- После добавления медиафайлов Plex начнет анализировать ваши файлы, и он будет готов к использованию.
- Включите `Scan my library automatically` и `Run a partial scan when changes are detected` в `Настройки` > `Библиотека`.

Дополнительные ресурсы:
- [github.com/plexinc/pms-docker](https://github.com/plexinc/pms-docker)

### Heimdall

Дополнительная служба.

- Веб-интерфейс доступен по адресу `http://<your_host_ip>:80`
- Нажмите на `Add an application here` и найдите приложение, например `Plex`
- Добавьте остальные службы из `Application list`, затем `Add`. Вот таблица всех приложений:
  | Название | URL |
  |:---------|:----|
  | Plex        | `http://<your_host_ip>:32400/web` |
  | qBittorrent | `http://<your_host_ip>:8080` |
  | Radarr      | `http://<your_host_ip>:7878` |
  | Sonarr      | `http://<your_host_ip>:8989` |
  | Lidarr      | `http://<your_host_ip>:8686` |
  | Prowlarr    | `http://<your_host_ip>:9696` |
  | Jackett     | `http://<your_host_ip>:9117` |
  | Bazarr      | `http://<your_host_ip>:6767` |
  | Ombi        | `http://<your_host_ip>:3579` |

- В конце вы можете изменить фоновое изображение на главной странице в меню настроек

### qBittorrent

Доступ к веб-интерфейсу qBittorrent по адресу `http://<your_host_ip>:8080` для настройки и конфигурации вашего клиента загрузки.

1. **Измените учетные данные по умолчанию**<br>
   Учетные данные по умолчанию для службы qBittorrent в образе LinuxServer:
     - Имя пользователя: admin
     - Пароль: adminadmin<br>
  
   Эти учетные данные являются значениями по умолчанию, и настоятельно рекомендуется изменить их как можно скорее. Вы можете изменить учетные данные, перейдя в Web UI qBittorrent, затем в `Settings` > `WebUI` и изменив поля имени пользователя и пароля.<br>
   Также полезно использовать уникальные и надежные пароли для всех ваших служб и регулярно их обновлять для обеспечения безопасности вашего медиасервера.

2. **Опции загрузки (используется для сохранения путей на основе категорий)**<br>
   Войдите и нажмите на "значок шестеренки", чтобы открыть `Options`.<br>
   На вкладке `Downloads` в разделе `Saving Management` настройте следующее:
    - `Default Torrent Management Mode`: `Automatic` (Это требуется для работы путей сохранения на основе категорий)
    - `When Torrent Category changed`: `Relocate torrent`
    - `When Default Save Path changed`: `Relocate affected torrents`
    - `When Category Save Path changed`: `Relocate affected torrents`
    - `Default Save Path`: `/data/torrents`
    - Нажмите `Save` внизу панели

3. **Ограничения на раздачу (необязательно)**<br>
   Снова перейдите в `Options` и на вкладке `BitTorrent` в разделе `Seeding Limits` настройте свои предпочтения. Подробнее о вариантах здесь: [Seeding limits demystified in qBittorrent](https://scribbleghost.net/2022/04/08/seeding-limits-demystified-in-qbittorrent/).<br>
   Например, `When seeding time reaches 1440min (24h)` и `When ratio reaches 1` затем `Pause torrent` (Не беспокойтесь, когда загрузка завершится, Radarr скопирует файлы в другой каталог).<br>
   Установите паузу/остановку, когда будет достигнут коэффициент раздачи. В Sonarr/Radarr включите Complete Download Handler и Failed Download Handler и включите Remove на обоих.<br>
   Таким образом, когда торренты будут завершены, они приостановятся, и затем Sonarr/Radarr удалит их после импорта.

4. **Категории**<br>
   - Radarr<br>
     В WebUI в левом меню разверните `CATEGORIES` и правой кнопкой мыши выберите `Add category`.<br>
     В окне `New Category` настройте следующее:
       - Категория: `radarr` (это должно соответствовать категории, которая позже настраивается в radarr)
       - Путь для сохранения: `/data/torrents/movies`
       - Нажмите `Add`  
   - Sonarr<br>
     Повторите процесс для Sonarr<br>
       - Категория: `sonarr` (это должно соответствовать категории, которая позже настраивается в клиенте загрузки sonarr, по умолчанию `sonarr-tv`, но будет использоваться `sonarr`)
       - Путь для сохранения: `/data/torrents/tv`
   - Lidarr<br>
     Повторите процесс
       - Категория: `lidarr`
       - Путь для сохранения: `/data/torrents/music`

### Prowlarr

1. **Учетные данные**<br>
   При первом доступе к веб-интерфейсу Prowlarr вам будет предложено создать учетные данные.
2. **Индексаторы**<br>
   Первое, что нужно настроить в Prowlarr, это индексаторы.<br>
   Добавьте каждый индекатор по отдельности в Prowlarr, это делается в боковом меню `Indexers`.<br>
   Вы можете использовать приоритет при их настройке.
3. **Профили синхронизации**<br>
   В `Settings` > `Apps` используйте профиль по умолчанию "Standard"
4. **Приложения**<br>
   Здесь мы настраиваем Prowlarr для подключения к другим приложениям, таким как Radarr и Sonarr.<br>
   Перейдите в `Settings` > `Apps` и выберите:
   - Radarr
     Вам потребуется API Key (получите его в Web UI Radarr в `Settings` > `General` > `Security`), сохраните его для дальнейшего использования<br>
     Уровень синхронизации: используйте значение по умолчанию `Add and Remove Only`<br>
     Сервер Prowlarr: `http://prowlarr:9696` (используется имя контейнера из-за определенной сети)<br>
     Сервер Radarr: `http://radarr:7878`<br>
   - Sonarr<br>
     Те же шаги, что и для Radarr<br>
     API Key<br>
     Сервер Prowlarr: `http://prowlarr:9696`<br>
     Сервер Sonarr: `http://sonarr:8989`<br>
   - Lidarr<br>
     Те же шаги<br>
     API Key<br>
     Сервер Prowlarr: `http://prowlarr:9696`<br>
     Сервер Lidarr: `http://lidarr:8686`<br>
5. **Уведомления (необязательно)**<br>
   Полезно использовать Telegram-бота для уведомлений.<br>
   Существует множество ресурсов о создании Telegram-бота с помощью "Bot Father"<br>
   Вам потребуется токен бота и ChatId.<br>
   При получении Chat ID обратите внимание, что он начинается со знака ``-``

Дополнительные ресурсы:
- [Prowlarr Quick Start Guide (Официальная документация)](https://wiki.servarr.com/prowlarr/quick-start-guide)
- [Prowlarr - обязательный инструмент для автоматизации! (YouTube)](https://www.youtube.com/watch?v=5deZNf2WhwI)
- [Prowlarr - альтернатива Jackett, которую вы ищете (unraid-guides.com)](https://unraid-guides.com/2022/04/29/prowlarr-is-the-jackett-alternative-you-need/)
- [Подключение Prowlarr к Radarr (quickbox.io)](https://quickbox.io/knowledge-base/v2/applications/prowlarr/connect-prowlarr-to-radarr/)

### Jackett

Необязательно, вы можете использовать Prowlarr вместо этого.
- Доступ к веб-интерфейсу Jackett по адресу `http://<your_host_ip>:9117` в вашем браузере.
- В веб-интерфейсе Jackett нажмите на кнопку "Add indexer" в верхнем правом углу страницы.
- Вы найдете список доступных индексаторов, вы можете добавить или настроить индексаторы по вашему желанию.

### Radarr

Доступ к веб-интерфейсу Radarr по адресу `http://<your_host_ip>:7878` в вашем браузере.<br>
Некоторые из перечисленных конфигураций являются необязательными, но определенно улучшают пользовательский опыт, и они стоят того, чтобы их проверить.

1. **Учетные данные**<br>
   Добавьте учетные данные в `Settings` > `General` > `Security`
2. **Клиенты загрузки**<br>
   Находится в `Settings` > `Download Clients`, нажмите на кнопку "Add", чтобы добавить нового клиента загрузки, выберите "qBittorrent" из списка<br>
   Хост: `qbittorrent`, не IP или localhost<br>
   Порт: 8080 (по умолчанию)<br>
   Имя пользователя и пароль<br>
   Категория: radarr (должно быть заполнено по умолчанию)<br>
   Кнопки Test и Save
3. **Индексаторы (необязательно)**<br>
   В Prowlarr уже должны быть настроены индексаторы.<br>
   Если используете Jackett:<br>
      - Вкладка "Indexers", следуйте инструкциям, предоставленным на странице Jackett<br>
      - Для ввода URL используйте имя контейнера `jackett`, а не IP или localhost, например `http://jackett:9117/api/v2..`, не забудьте нажать кнопку сохранения вверху страницы.
4. **Управление медиа**<br>
   Переименование фильмов<br>
      - На вкладке `Media Management` вы можете настроить, как Radarr должен организовывать и переименовывать ваши загруженные фильмы.
      - Включите `Rename Movies`
      - Полезный шаблон именования, например: `({Release Year}) {Movie Title} {Quality Full}` соответствует ` (2010) The Movie Title Bluray-1080p Proper`<br>
   
   Включите `Unmonitor Deleted Movies`<br>
   Корневые папки
      - `/data/media/movies/`
      - `/data/media/movies favorite/` (необязательно)<br>
        Имеется такая папка, где хранятся все мои любимые фильмы, чтобы, если нужно очистить пространство, проверить только папку с фильмами, которые не находятся в избранных.<br>
5. **Уведомления (необязательно)**<br>
   Используйте Telegram, как описано в Prowlarr
6. **Аналитика (необязательно)**<br>
   Вы можете отключить `Send Anonymous Usage Data` в `Settings` > `General` > `Analytics`
7. **Списки (необязательно)** **WIP!**<br>
   Списки Radarr - это пользовательские коллекции фильмов в программном обеспечении Radarr для управления фильмами, используемые для отслеживания и организации фильмов в вашей коллекции.<br>
   Их можно настроить и использовать с функцией "Lists and Indexers" Radarr для эффективного управления фильмами.<br>
   Списки Radarr позволяют создавать пользовательские списки фильмов, такие как "Хотелось бы посмотреть", "Просмотренные", "В собственности" и т.д.<br>
   Это помогает отслеживать, какие фильмы у вас есть, а какие еще нужно добавить в вашу коллекцию.<br>
   Позволяет искать фильмы из конкретных источников, таких как IMDb, Trakt или TMDB. Используя списки и индексаторы Radarr, вы можете легко найти фильмы, которые хотите добавить в свою коллекцию, и отслеживать ваш прогресс.
8. **Пользовательские форматы (необязательно)**<br>
   Это может помочь нам искать, например, фильм, переведенный на наш родной язык<br>
   Например, приоритизируйте фильмы с BG Audio:<br>
      - Нажмите `Add Custom Format`, дайте имя<br>
      - Условия:<br>
        - Тип: `Release Title`, Имя: `BGAUDIO in title`, Регулярное выражение: `BGAUDIO`
        - Тип: `Release Title`, Имя: `Bulgarian in title`, Регулярное выражение: `Bulgarian`
        - Тип: `Language`, Имя: `BG audio source`, Язык: `Bulgarian`

После завершения настройки Radarr вы можете начать добавлять фильмы в вашу библиотеку, нажав на кнопку "Add Movies" в верхнем правом углу страницы.<br>
Вы также можете настроить Radarr для автоматического поиска новых фильмов, нажав на кнопку "Calendar" на боковой панели страницы.

### Sonarr

Доступ к веб-интерфейсу Sonarr по адресу `http://<your_host_ip>:8989` для настройки вашего библиотеки TV-шоу.<br>
Настройка Sonarr проста, вы можете следовать указаниям Radarr, в кратце:

1. **Учетные данные**
2. **Клиенты загрузки**
   Хост: `qbittorrent`<br>
   Категория `sonarr`, по умолчанию `tv-sonarr`
3. **Индексаторы (необязательно)**<br>
   В Prowlarr уже должны быть настроены индексаторы.<br>
4. **Управление медиа**<br>
   Переименование эпизодов<br>
      - Формат папки сезона: `{Series Year} Season {season}`<br>   
   Включите `Unmonitor Deleted Movies`<br>
   Корневые папки
      - `/data/media/tv/`
5. **Уведомления (необязательно)**<br>
   `Settings` > `Connect`
6. **Аналитика (необязательно)**<br>
   `Send Anonymous Usage Data` в `Settings` > `General` > `Analytics`
7. **Списки (необязательно)**<br>

После добавления ваших ТВ-шоу Sonarr начнет искать их, загружать и добавлять в вашу библиотеку Plex.

### Lidarr

Веб-интерфейс доступен по адресу `http://<your_host_ip>:8686`<br>  
Настройка аналогична Radarr и Sonarr, проверьте их для справки.

### Bazarr

Доступ к веб-интерфейсу Bazarr по адресу `http://<your-server-ip>:6767` в веб-браузере.

1. **Учетные данные**<br>
   `Settings` > `General` > `Security`, для аутентификации выберите `Form`, затем `Save` изменения
2. **Аналитика**<br>
   Вы можете отключить `Settings` > `General` > `Analytics`
3. **Языки**<br>
   `Settings` > `Languages`, следующие значения на ваше усмотрение, например:<br>
   Фильтр языков: `Bulgarian` `English`<br>
   Профили языков: Название `BG/EN`, выберите языки<br>
   Настройки по умолчанию: Включите для Серий и Фильмов<br>
   Не забудьте `Save` перед выходом со страницы<br>
4. **Используйте Sonarr и Radarr**<br>
   Это синхронизируется с приложениями<br>
   Потребуются API ключи<br>
   Вы также можете проверить `Minimum Score` в разделе `Options`, оставьте значение по умолчанию, работает хорошо.<br>
5. **Поставщики**<br>
   Добавьте поставщиков, самый важный момент, например:<br>
   - OpenSubtitles.org
   - Subsunacs.net
   - Subs.sab.bz
   - Yavka.net
   - Supersubtitles
6. **Планировщик**<br>
   - Вы можете обновить некоторые настройки, такие как `Sonarr/Radarr Sync`

Важно отметить, что конкретные настройки могут варьироваться в зависимости от вашей конкретной конфигурации, но вышеуказанные шаги должны дать вам хорошую отправную точку.<br>
Вы также можете обратиться к официальной документации Bazarr для получения дополнительной информации о настройках и доступных опциях.<br>
- [wiki.bazarr.media/Getting-Started/Setup-Guide/](https://wiki.bazarr.media/Getting-Started/Setup-Guide/)
- [wiki.bazarr.media/Additional-Configuration/](https://wiki.bazarr.media/Additional-Configuration/Settings/)
- [wiki.bazarr.media/Troubleshooting/FAQ](https://wiki.bazarr.media/Troubleshooting/FAQ/#what-are-forced-subtitles)

### Ombi

Доступ к веб-интерфейсу Ombi по адресу `http://<your-server-ip>:3579` в веб-браузере.

1. Следуйте начальному настройке Ombi, (`Welcome` > `Media Server` > `Create local admin` > `Ombi config`).
2. Подключите Ombi к вашему медиасерверу или клиенту загрузки, таким как Plex, Sonarr, Radarr и т.д.<br>
   Sonarr<br>
   Настройка находится в `Settings` > `Sonarr`, вам потребуется API Key для Hostname: `sonarr`.<br>
   Слева нажмите `Load Qualities` и выберите профиль по умолчанию, аналогично для `Load Folders` и `Load Languages`.<br>

   Radarr и Lidarr настраиваются аналогично.<br>

3. **Уведомления (необязательно)**.<br>
   Используйте Telegram, как и в других службах.
4. **Сбор данных (необязательно)**.<br>
   Вы можете отключить `Allow us to collect anonymous analytical data e.g. browser used` в `Configuration` > `General`.

Дополнительные ресурсы:
- [Ombi - Wiki Bytesized Hosting](https://bytesized-hosting.com/pages/ombi)

## Заметки автора

**Улучшения в ближайшем будущем:** Подумайте и рассмотрите следующие улучшения:

NGINX, Portainer, Watchtower и Traefik — это дополнительные службы, которые улучшают общую функциональность и безопасность медиасервера.<br>
NGINX может использоваться как веб-сервер и обратный прокси для маршрутизации входящего трафика к соответствующей службе в зависимости от запрашиваемого URL.<br>
Portainer позволяет легко управлять вашими контейнерами и их конфигурациями.<br>
Watchtower автоматически обновляет работающие Docker-контейнеры до последней версии.<br>
Traefik — это обратный прокси и балансировщик нагрузки для контейнеров, который можно использовать для маршрутизации входящего трафика к соответствующей службе в зависимости от запрашиваемого URL.

- [ ] NGINX
- [ ] Резервное копирование
- [ ] Мониторинг (включая уведомления, такие как низкое количество свободного места и т. д.)
- [ ] Provision с помощью Ansible (создание новой виртуальной машины, конфигурация, восстановление резервных копий и т. д.)
- [ ] Автоматическое восстановление

Дополнительные службы:
- [ ] Нужен ли Plex GPU?
- [ ] VPN
- [ ] Requestrr — это чат-бот, упрощающий использование таких служб, как Sonarr/Radarr/Ombi через чат
- [ ] AllTube
- [ ] Загрузка с YouTube
- [ ] Jellyfin
- [ ] CouchPotato
- [ ] FreshRSS
- [ ] Airsonic — это бесплатный веб-стример медиа, обеспечивающий повсеместный доступ к вашей музыке

Вероятно, не нужно:
- [ ] LazyLibrarian
- [ ] Mylar
- [ ] Whisparr, действительно?
